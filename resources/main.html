<div class="main-container noise-background">
    <div class=hover-message>
        <div class=message></div>
    </div>

    <div class=loading-progress-bar></div>

    <!-- main_ui: -->
    <div class="view view-illust-container">
        <!-- Mouse movement is detected inside this box.  Anything outside of it will
             be unaffected by mouse hiding. -->
        <div class=mouse-hidden-box>
            <div class=preview-container data-context-menu-target></div>
            <div class=image-container data-context-menu-target></div>

            <div class=page-change-indicator data-icon=last-image>
                ### inline:last-page.svg
            </div>

            <div class=ugoira-seek-bar></div>
        </div>

        <!-- This covers the progress bar. -->
        <div class=manga-thumbnail-container hidden>
            <div class=strip>
                <div class=manga-thumbnail-arrow data-direction=left>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="100" viewBox="0 0 20 100">
                        <path d="M 0 50 L 20 0 L 20 100 L 0 50" />
                    </svg>
                </div>

                <div class=manga-thumbnails></div>

                <div class=manga-thumbnail-arrow data-direction=right>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="100" viewBox="0 0 20 100">
                        <path d="M 20 50 L 0 0 L 0 100 L 20 50" />
                    </svg>
                </div>
            </div>
        </div>

        <div class=ui>
            <div class=hover-sphere>
                <svg viewBox="0 0 1 1" preserveAspectRatio="none">
                    <circle class=hover-circle cx="0.5" cy="0.5" r=".5" fill-opacity="0" />
                </svg>
            </div>
        </div>
    </div>

    <!-- thumbnail_view: -->
    <div class="view view-search-container" data-context-menu-target hidden>
        <div class="thumbnail-ui top-ui-box">
            <div style="flex: 1;"></div>

            <div class=thumbnail-ui-box data-context-menu-target=off>
                <div class="data-source-specific avatar-container" data-datasource="artist illust bookmarks following"></div>
                <a href=# class="data-source-specific image-for-suggestions" data-datasource=related-illusts>
                    <!-- A blank image, so we don't load anything: -->
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==">
                </a>

                <div class=title-with-button-row>
                    <div class="displaying title-font"></div>
                    <div style="flex: 1;"></div>
                    <div class=button-row>
                        <div class=first-icon>
                            <a href=# rel=noreferrer class="webpage-link grey-icon popup popup-bottom" data-popup="Webpage" hidden>
                                <svg viewBox="0 0 391.08 391.08" style="fill: currentColor;">
                                    <path d="M326.67,203.55L200.38,91.71,74,203.6V363.47a7.44,7.44,0,0,0,7.46,7.45h79v-70.1a7.44,7.44,0,0,1,7.45-7.46h64.88a7.44,7.44,0,0,1,7.45,7.46v70.1h79a7.42,7.42,0,0,0,7.45-7.45V203.55Z" transform="translate(-4.8 -5.17)"/>
                                    <path d="M199.65,30.51L20.44,189.19l18.88,21.29L200.38,67.86l161,142.62,18.84-21.29L201.08,30.51l-0.7.81-0.73-.81h0Z" transform="translate(-4.8 -5.17)"/>
                                </svg>
                            </a>
                        </div>

                        <div>
                            <a href=# rel=noreferrer class="twitter-icon grey-icon popup popup-bottom" data-popup="Twitter" hidden>
                                <svg viewBox="0 0 32 32" style="fill: currentColor;">
                                    <path d="M3,24.3115115 C3.43335894,24.361638 3.8743224,24.3872818 4.32140898,24.3872818 C6.9166246,24.3872818 9.30513552,23.5195519 11.2009327,22.063852 C8.77696697,22.0200155 6.73125206,20.4508052 6.02640184,18.2943991 C6.36455613,18.3577829 6.71159881,18.391749 7.0685175,18.391749 C7.57377373,18.391749 8.0631296,18.325462 8.52799298,18.2014038 C5.99381104,17.7028486 4.0844837,15.5090896 4.0844837,12.8792882 C4.0844837,12.8564507 4.0844837,12.8337099 4.08487874,12.8110659 C4.83180072,13.2175936 5.68587732,13.4617424 6.59397564,13.4899022 C5.10763744,12.5165971 4.12961703,10.8552624 4.12961703,8.97222947 C4.12961703,7.97753828 4.40278723,7.04516649 4.87960057,6.24352996 C7.61169757,9.52729793 11.6933502,11.6881554 16.2971469,11.9144987 C16.2027324,11.5172609 16.1536486,11.1029917 16.1536486,10.6775941 C16.1536486,7.68016635 18.6339076,5.25 21.6931965,5.25 C23.2863931,5.25 24.7260178,5.90919218 25.7365302,6.96407385 C26.9982882,6.7206024 28.1838034,6.26888351 29.2540656,5.64694749 C28.8404587,6.91433445 27.9621859,7.97802213 26.8184462,8.64979431 C27.9389773,8.5185752 29.006573,8.22681589 30,7.79512823 C29.2573247,8.88358883 28.318117,9.83957232 27.2359048,10.6048236 C27.2465708,10.8375537 27.2519039,11.0716385 27.2519039,11.3069813 C27.2519039,18.4794219 21.680259,26.75 11.4913859,26.75 C8.36316252,26.75 5.45142105,25.8514974 3,24.3115115 Z"></path>
                                </svg>

                            </a>
                        </div>

                        <div>
                            <a href=# rel=noreferrer class="pawoo-icon grey-icon popup popup-bottom" data-popup="Pawoo" hidden>
                                <svg viewBox="0 0 32 32" style="fill: currentColor;">
                                    <path d="M10.3476651,20.4315053 C10.236482,20.1792053 10.1733587,19.8903171 10.1733587,19.5833313 C10.1733587,18.5973729 10.8244928,17.7980957 11.6277074,17.7980957 C12.4309221,17.7980957 13.0820562,18.5973729 13.0820562,19.5833313 C13.0820562,20.3254493 12.7131643,20.9618053 12.1881895,21.231173 C12.819893,21.2267209 13.5009406,21.0038384 13.9222139,20.4926667 C14.3477875,19.976277 14.5364049,19.090237 14.5364049,18.2444046 C14.5364049,16.5948203 13.4764192,15.2575681 12.1688604,15.2575681 C10.8613017,15.2575681 9.80131596,16.5948203 9.80131596,18.2444046 C9.80131596,19.0237627 9.91081955,19.8357213 10.2983538,20.3675564 C10.3141301,20.3892071 10.3305786,20.4105263 10.3476651,20.4315053 Z M8.13963596,11.0814764 C8.8405586,10.089699 10.2489357,8.48847029 11.698583,7.6886383 C13.1482303,6.88880632 15.2673577,6.22130239 18.2564056,6.46548663 C21.2454536,6.70967086 22.8162796,7.96301699 23.5927252,8.58716521 C24.3691709,9.21131343 25.365798,10.5724763 25.9412244,12.2185477 C26.5166508,13.864619 27.0041475,15.5937822 26.9990127,18.2190273 C26.9938779,20.8442725 26.4501111,22.9685845 25.1117422,24.1927619 C25.0779164,24.2237017 25.0437394,24.2540809 25.0092259,24.2838991 C23.6781605,25.433881 21.8465608,25.7492991 20.3552956,25.1953478 C18.825363,24.6270329 18.4868407,24.0816021 18.0402519,22.9515738 C17.5936631,21.8215455 17.4095505,20.0833607 17.4119551,18.8539433 C17.4143598,17.6245259 17.4847587,17.4976298 17.4859864,16.8699608 C17.4872141,16.2422917 17.0925209,16.2866811 17.0181495,16.8545227 C16.943778,17.4223642 16.8999846,18.1219102 16.8991489,18.5491704 C16.8980863,19.0924745 16.9318342,20.5023058 17.0095249,21.2639909 C17.0872155,22.0256759 17.3250405,23.186485 17.5639667,23.742337 C17.8028929,24.2981891 18.2596324,24.969782 18.2596324,24.969782 C18.2596324,24.969782 17.2268799,25.5232236 15.1979421,25.5638493 C13.1690043,25.604475 12.0354896,25.5888525 10.3448228,25.4037017 C8.65415608,25.2185509 6.60359439,24.7683126 5.23999895,24.2321671 C3.87640351,23.6960216 3.18815991,23.2009837 2.22325411,22.3077434 C1.25834832,21.414503 0.483604407,20.0592237 1.3922294,19.429012 C2.30085438,18.7988004 2.60049796,19.3514851 3.02157079,19.6960499 C3.2957586,19.9204183 3.83490894,20.4853046 4.65914893,20.7784678 C5.48338892,21.0716311 5.7352815,21.0703736 6.17206905,20.7754677 C6.77989521,20.3650817 6.49337645,18.1572476 6.49481705,17.6582474 C6.49625766,17.1592472 6.42964834,15.4386273 6.79203089,14.1605028 C7.15441345,12.8823783 7.43871331,12.0732538 8.13963596,11.0814764 Z"></path>
                                </svg>
                            </a>
                        </div>

                        <div>
                            <a href=# rel=noreferrer class="circlems-icon grey-icon popup popup-bottom" data-popup="Circle.ms" xhidden>
                                ### inline:circlems-icon.svg
                            </a>
                        </div>
                        
                        <div>
                            <a href=# class="similar-artists-link grey-icon bulb-button popup popup-bottom" data-popup="Similar artists">
                                ### inline:related-illusts.svg
                            </a>
                        </div>

                        <div>
                            <a class="bookmarks-link grey-icon popup popup-bottom" href=# rel=noreferrer data-popup="View bookmarks" hidden>
                                <svg viewBox="0 0 510 510" style="width: 28px; fill: currentColor;">
                                    <path d="M510,197.472l-183.37-15.734L255,12.75l-71.629,168.988L0,197.472l139.103,120.539L97.41,497.25L255,402.186 l157.59,95.064l-41.692-179.239L510,197.472z M255,354.348l-95.957,57.886l25.398-109.166l-84.736-73.389l111.69-9.588 L255,117.172l43.605,102.918l111.689,9.588l-84.711,73.389l25.398,109.166L255,354.348z"
                                    />
                                </svg>
                            </a>
                        </div>

                        <div>
                            <a href=# rel=noreferrer class="following-link grey-icon popup popup-bottom" data-popup="Follows" hidden>
                                ### inline:followed-users-eye.svg
                            </a>
                        </div>

                        <div>
                            <a class="contact-link grey-icon popup popup-bottom" href=# rel=noreferrer data-popup="Send a message" hidden>
                                <svg viewBox="0 0 114 114" stroke="currentColor">
                                    <path stroke-width="7" fill="none" d="m7,20h98v72H7zl44,44q5,4 10,0l44-44M7,92l36-36m26,0 36,36"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>

                <div class=button-row>
                    <a class="disable-ui-button popup" data-popup="Return to Pixiv" href="#no-ppixiv" style="margin-right: -2px;">
                        ### inline:pixiv-icon.svg
                    </a>

                    <div class="navigation-menu-box popup" data-popup="Search">
                        <div class="menu-button grey-icon icon-button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" style="fill: currentColor;">
                                <path d="M 6 7 h 20 v 4 h -20 v -4"/>
                                <path d="M 6 14 h 20 v 4 h -20 v -4"/>
                                <path d="M 6 21 h 20 v 4 h -20 v -4"/>
                            </svg>
                        </div>
                        <div class="popup-menu-box">
                            <div class=option-list>
                                <a class=box-link href="/new_illust.php#ppixiv">New works</a>
                                <a class=box-link href="/bookmark_new_illust.php#ppixiv">New works by following</a>
                                <div style="display: flex; flex-direction: row; align-items: baseline;">
                                    <a class=box-link href="/bookmark.php?p=1#ppixiv">Bookmarks</a>
                                    <div style="flex: 1;"></div>
                                    <a class="box-link small-font" href="/bookmark.php?p=1#ppixiv">all</a>
                                    <a class="box-link small-font" href="/bookmark.php?p=1#ppixiv?show-all=0">public</a>
                                    <a class="box-link small-font" href="/bookmark.php?p=1&rest=hide#ppixiv?show-all=0">private</a>
                                </div>
                                <div style="display: flex; flex-direction: row; align-items: baseline;">
                                    <a class=box-link href="/bookmark.php?type=user#ppixiv">Followed users</a>
                                    <div style="flex: 1;"></div>
                                    <a class="box-link small-font" href="/bookmark.php?type=user#ppixiv?show-all=0">public</a>
                                    <a class="box-link small-font" href="/bookmark.php?type=user&rest=hide#ppixiv?show-all=0">private</a>
                                </div>
                                <a class=box-link href="/discovery#ppixiv">Recommended works</a>
                                <a class=box-link href="/discovery/users#ppixiv">Recommended users</a>
                                <a class=box-link href="/search_user.php#ppixiv">Search users</a>
                                <a class=box-link href="/ranking.php#ppixiv">Rankings</a>

                                <div class="navigation-search-box" style="padding: .25em; margin: .25em;">
                                    <div class=search-box>
                                        <input class="search-tags keep-menu-open" placeholder=Search>

                                        <span class=search-submit-button>
                                        ### inline:search-icon.svg
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="refresh-search-button popup" data-popup="Refresh">
                        <div class="menu-button grey-icon icon-button">
                            ### inline:refresh-icon.svg
                        </div>
                    </div>

                    <div class="whats-new-button menu-button popup" data-popup="What's New" style="margin-right: -2px;">
                        ### inline:whats-new.svg
                    </div>

                    <div class="thumbnail-settings-menu-box settings-menu-box popup" data-popup="Preferences">
                        <div class="menu-button grey-icon icon-button">
                            ### inline:settings-icon.svg
                        </div>
                        
                        <div class="popup-menu-box keep-menu-open">
                            <div class=option-list></div>
                        </div>
                    </div>
                </div>

                <div class="data-source-specific" data-datasource=discovery>
                    <a class="box-link popup" data-type=all data-popup="Show all works" href="?mode=all#ppixiv">All</a>
                    <a class="box-link popup" data-type=safe data-popup="Show all-ages works" href="?mode=safe#ppixiv">All ages</a>
                    <a class="box-link popup r18" data-type=r18 data-popup="Show R18 works" href="?mode=r18#ppixiv">R18</a>
                </div>

                <div class="data-source-specific" data-datasource=new_illust>
                    <a class="box-link popup" data-type=new-illust-type-illust data-popup="Show illustrations" href="#">Illustrations</a>
                    <a class="box-link popup" data-type=new-illust-type-manga data-popup="Show manga only" href="#">Manga</a>

                    <a class="box-link popup" data-type=new-illust-ages-all data-popup="Show all-ages works" href="#">All ages</a>
                    <a class="box-link popup r18" data-type=new-illust-ages-r18 data-popup="Show R18 works" href="#">R18</a>
                </div>
                
                <div class="data-source-specific" data-datasource=rankings>
                    <div>
                        <span class=nav-tomorrow>
                            <a class="box-link popup" data-popup="Show the next day" href="#">Next day</a>
                        </span>

                        <span class=nav-today></span>

                        <span class=nav-yesterday> <!-- so box-link's display style doesn't override hidden -->
                            <a class="box-link popup" data-popup="Show the previous day" href="#">Previous day</a>
                        </span>
                    </div>

                    <div class="checked-links">
                        <a class="box-link popup" data-type=content-all data-popup="Show all works" href="#">All</a>
                        <a class="box-link popup" data-type=content-illust data-popup="Show illustrations only" href="#">Illustrations</a>
                        <a class="box-link popup" data-type=content-ugoira data-popup="Show ugoira only" href="#">Ugoira</a>
                        <a class="box-link popup" data-type=content-manga data-popup="Show manga only" href="#">Manga</a>
                    </div>

                    <div class="checked-links">
                        <a class="box-link popup" data-type=mode-daily data-popup="Daily rankings" href="#">Daily</a>
                        <a class="box-link popup r18" data-type=mode-daily-r18 data-popup="Show R18 works (daily only)" href="#">R18</a>
                        <a class="box-link popup r18g" data-type=mode-r18g data-popup="Show R18G works (weekly only)" href="#">R18G</a>
                        <a class="box-link popup" data-type=mode-weekly data-popup="Weekly rankings" href="#">Weekly</a>
                        <a class="box-link popup" data-type=mode-monthly data-popup="Monthly rankings" href="#">Monthly</a>
                        <a class="box-link popup" data-type=mode-rookie data-popup="Rookie rankings" href="#">Rookie</a>
                        <a class="box-link popup" data-type=mode-original data-popup="Original rankings" href="#">Original</a>
                        <a class="box-link popup" data-type=mode-male data-popup="Popular with men" href="#">Male</a>
                        <a class="box-link popup" data-type=mode-female data-popup="Popular with women" href="#">Female</a>
                    </div>
                </div>
                 
                <div class="data-source-specific" data-datasource=bookmarks>
                    <div class=bookmarks-public-private>
                        <a class="box-link popup" data-type=all data-popup="Show all bookmarks" href=#>All</a>
                        <a class="box-link popup" data-type=public data-popup="Show public bookmarks" href=#>Public</a>
                        <a class="box-link popup" data-type=private data-popup="Show private bookmarks" href=#>Private</a>
                    </div>
                </div>                

                <div class="data-source-specific" data-datasource=following>
                    <div class=follows-public-private>
                        <a class="box-link popup" data-type=public-follows data-popup="Show publically followed users" href=#>Public</a>
                        <a class="box-link popup" data-type=private-follows data-popup="Show privately followed users" href=#>Private</a>
                    </div>

                    <div class=bookmark-tag-selection>
                        <span>Follow tags:</span>
                        <span class=follow-tag-list></span>
                    </div>
                </div>                
                
                <div class="data-source-specific" data-datasource="bookmarks">
                    <div class=bookmark-tag-selection>
                        <span>Bookmark tags:</span>
                        <span class=bookmark-tag-list></span>
                    </div>
                </div>

                <div class="data-source-specific" data-datasource="bookmarks_new_illust">
                    <a class="box-link popup" data-type=bookmarks-new-illust-all data-popup="Show all works" href="#">All</a>
                    <a class="box-link popup r18" data-type=bookmarks-new-illust-ages-r18 data-popup="Show R18 works" href="#">R18</a>
                     
                    <div class=bookmark-tag-selection>
                        <span>Follow tags:</span>
                        <span class=follow-new-post-tag-list></span>
                    </div>
                </div>

                <div class="data-source-specific" data-datasource=artist>
                    <div class=search-options-row>
                        <a class="box-link popup" data-type=artist-works data-popup="Show all works" href=#>Works</a>
                        <a class="box-link popup" data-type=artist-illust data-popup="Show illustrations only" href=#>Illusts</a>
                        <a class="box-link popup" data-type=artist-manga data-popup="Show manga only" href=#>Manga</a>

                        <div class=member-tags-box>
                            <div class="menu-button box-link">Tags</div>
                            <div class="popup-menu-box post-tag-list"></div>
                        </div>
                    </div>
                </div>
                 
                <div class="data-source-specific" data-datasource=search>
                    <div class="search-page-tag-entry search-box">
                        <div class="tag-search-box hover-menu-box">
                            <input class=search-tags placeholder=Tags>
                            <span class="edit-search-button right-side-button">
                            ### inline:edit-icon.svg
                            </span>

                            <span class="search-submit-button right-side-button">
                            ### inline:search-icon.svg
                            </span>
                        </div>

                        <div class=search-tags-box style="display: inline-block;">
                            <div class="menu-button box-link">Related tags</div>
                            <div class="popup-menu-box related-tag-list"></div>
                        </div>
                    </div>

                    <!-- We don't currently have popup text for these, since it's a little annoying to
                         have it pop over the menu. -->
                    <div class=search-options-row>
                        <div class=ages-box>
                            <span class="menu-button box-link">Ages</span>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=ages-all data-default=1 href="?mode=all#ppixiv">All</a>
                                    <a class=box-link data-type=ages-safe href="?mode=safe#ppixiv">All ages</a>
                                    <a class="box-link r18" data-type=ages-r18 href="?mode=r18#ppixiv">R18</a>
                                </div>
                            </div>
                        </div>
                       
                        <div class=popularity-box>
                            <span class="menu-button box-link">Sort</span>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=order-newest data-default=1 href="?order=all#ppixiv">Newest</a>
                                    <a class=box-link data-type=order-oldest href="?order=all#ppixiv">Oldest</a>
                                    <a class="box-link premium-only" data-type=order-all href="?order=popular_d#ppixiv">Popularity</a>
                                    <a class="box-link premium-only" data-type=order-male href="?order=popular_male_d#ppixiv" data-short-label="Popular ♂">Popular with men</a>
                                    <a class="box-link premium-only" data-type=order-female href="?order=popular_female_d#ppixiv" data-short-label="Popular ♀">Popular with women</a>
                                </div>
                            </div>
                        </div>

                        <div class=type-box>
                            <span class="box-link menu-button">Type</span>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=search-type-all data-default=1 href="?type=all#ppixiv">All</a>
                                    <a class=box-link data-type=search-type-illust data-short-label="Illusts" href="?type=illust#ppixiv">Illustrations</a>
                                    <a class=box-link data-type=search-type-manga href="?type=manga#ppixiv">Manga</a>
                                    <a class=box-link data-type=search-type-ugoira href="?type=ugoira#ppixiv">Ugoira</a>
                                </div>
                            </div>
                        </div>

                        <div class=search-mode-box>
                            <div class="box-link menu-button">Search mode</div>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=search-all data-default=1 href="?#ppixiv">Tag</a>
                                    <a class=box-link data-type=search-exact data-short-label="Exact match" href="?s_mode=s_tag_full#ppixiv">Exact tag match</a>
                                    <a class=box-link data-type=search-text href="?s_mode=s_tc#ppixiv">Text search</a>
                                </div>
                            </div>
                        </div>

                        <div class=size-box>
                            <span class="box-link menu-button">Image size</span>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=res-all data-default=1 href="#">All</a>
                                    <a class=box-link data-type=res-high href="?wlt=3000&hlt=3000#ppixiv">High-res</a>
                                    <a class=box-link data-type=res-medium href="?wlt=1000&wgt=2999&hlt=1000&hgt=2999#ppixiv">Medium-res</a>
                                    <a class=box-link data-type=res-low href="?wgt=999&hgt=999#ppixiv">Low-res</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class=aspect-ratio-box>
                            <span class="box-link menu-button">Aspect ratio</span>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=aspect-ratio-all data-default=1 href="?ratio=0.5#ppixiv">All</a>
                                    <a class=box-link data-type=aspect-ratio-landscape href="?ratio=0.5#ppixiv">Landscape</a>
                                    <a class=box-link data-type=aspect-ratio-portrait href="?ratio=-0.5#ppixiv">Portrait</a>
                                    <a class=box-link data-type=aspect-ratio-square href="?ratio=0#ppixiv">Square</a>
                                </div>
                            </div>
                        </div>

                        <div class="bookmarks-box premium-only">
                            <span class="menu-button box-link">Bookmarks</span>
                            <div class="popup-menu-box">
                                <!-- The Pixiv search form shows 300-499, 500-999 and 1000-.  That's not
                                     really useful and the query parameters let us filter differently, so we
                                     replace it with a more useful "minimum bookmarks" filter. -->
                                <div class="option-list min-bookmarks">
                                    <a class=box-link data-type=bookmarks-all data-default=1 href="#ppixiv">All</a>
                                    <a class=box-link data-type=bookmarks-100 href=#>100+</a>
                                    <a class=box-link data-type=bookmarks-250 href=#>250+</a>
                                    <a class=box-link data-type=bookmarks-500 href=#>500+</a>
                                    <a class=box-link data-type=bookmarks-1000 href=#>1000+</a>
                                    <a class=box-link data-type=bookmarks-2500 href=#>2500+</a>
                                    <a class=box-link data-type=bookmarks-5000 href=#>5000+</a>
                                </div>
                            </div>
                        </div>
                       

                        <div class="time-box premium-only">
                            <div class="menu-button box-link">Time</div>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=time-all data-default=1 href="#">All</a>
                                    <a class=box-link data-type=time-week data-short-label="Weekly" href="#">This week</a>
                                    <a class=box-link data-type=time-month data-short-label="Monthly" href="#">This month</a>
                                    <a class=box-link data-type=time-year data-short-label="Yearly" href="#">This year</a>
                                    <style>
                                        .years-ago {
                                            padding: .25em;
                                            margin: .25em;
                                            white-space: nowrap;
                                        }
                                        /* These links are mostly the same as box-link, but since the
                                         * menu background is the same as the box-link background color,
                                         * we shift it a little to make it clear these are buttons. */
                                        .years-ago > a {
                                            padding: 4px 10px;
                                            background-color: #444;
                                        }
                                        body.light .years-ago > a {
                                            background-color: #ccc;
                                        }
                                    </style>
                                    <div class=years-ago>
                                        <a class=box-link data-type=time-years-ago-1 data-short-label="1 year" href="#">1</a>
                                        <a class=box-link data-type=time-years-ago-2 data-short-label="2 years" href="#">2</a>
                                        <a class=box-link data-type=time-years-ago-3 data-short-label="3 years" href="#">3</a>
                                        <a class=box-link data-type=time-years-ago-4 data-short-label="4 years" href="#">4</a>
                                        <a class=box-link data-type=time-years-ago-5 data-short-label="5 years" href="#">5</a>
                                        <a class=box-link data-type=time-years-ago-6 data-short-label="6 years" href="#">6</a>
                                        <a class=box-link data-type=time-years-ago-7 data-short-label="7 years" href="#">7</a>
                                        <span>years ago</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <a href=# class="reset-search box-link popup" data-popup="Clear all search options">Reset</a>
                    </div>
                </div>

                <div class="data-source-specific" data-datasource=search-users>
                    <div class=search-box>
                        <div class="user-search-box hover-menu-box">
                            <input class=search-users placeholder="Search users">

                            <span class="search-submit-button right-side-button">
                            ### inline:search-icon.svg
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div style="flex: 1;">
            </div>
        </div>

        <div class="top-ui-box-padding"></div>

        <div class=no-results hidden>
            <div class=message>No results</div>
        </div>

        <ul class=thumbnails></ul>
    </div>

    <div class="view view-manga-container" data-context-menu-target hidden>
        <div class="ui top-ui-box" style="display: flex; width: 100%; justify-content: center;">
            <div class=ui-container data-context-menu-target=off></div>
        </div>
        
        <div class="top-ui-box-padding"></div>
        <ul class=thumbnails></ul>
    </div>

    <div class=whats-new-box hidden>
        <div class=content>
            <div class=scroll>
                <div class=header>Updates</div>
                <div class=items></div>
            </div>
            <div class=close-button>
                ### inline:close-button.svg
            </div>
        </div>
    </div>
    
    <!-- Templates: -->
    <div>
        <template class=template-version-history-item>
            <div>
                <div class=rev></div>
                <div class=text></span>
            </div>
        </template>
        <template class=template-load-previous-results>
            <li class="thumbnail-load-previous">
                <div class=load-previous-buttons>
                    <a class="load-previous-button load-first-page-link" href=#>
                        Return to start
                    </a>
                    <a class="load-previous-button load-previous-page-link" href=#>
                        Load previous results
                    </a>
                </div>
            </li>
        </template>
        <template class=template-thumbnail>
            <li class=thumbnail-box>
                <div class=thumbnail-inner>
                    <a class=thumbnail-link href=#>
                        <img class=thumb>
                    </a>

                    <div class="thumbnail-label" hidden><span class=label></span></div>
                    <div class=thumbnail-bottom-left>
                        <div class="heart button-bookmark public bookmarked" hidden>
                            ### inline:heart-icon.svg
                        </div>
                        <div class="heart button-bookmark private bookmarked" hidden>
                            ### inline:heart-icon.svg
                        </div>

                        <!-- I don't like having no popup here, but it's too intrusive over the thumbnail.
                             Hopefully the popup over the equivalent button in the image UI is enough to tell
                             people what this does. -->
                        <a href=# class="similar-illusts-button bulb-button grey-icon">
                            ### inline:related-illusts.svg
                        </a>
                    </div>
                    
                    <div class=ugoira-icon hidden></div>
                    <a class=page-count-box hidden>
                        <span class=page-icon></span>
                        <span class=page-count></span>
                    </a>
                    <div class=muted>
                        <span>Muted:</span>
                        <span class=muted-label></span>
                    </div>
                </div>
            </li>
        </template>

        <template class=template-image-ui>
            <div class=ui-box>
                <!-- The avatar icon in the top-right.  This is absolutely positioned, since we don't
                     want this to push the rest of the UI down. -->
                <div class="avatar-popup" style="position: absolute; top: 1em; right: 1em;"></div>

                <!-- The title and author.  The margin-right here is to prevent this from
                     overlapping the absolutely-positioned avatar icon above. -->
                <div style="display: flex; flex-direction: row; margin-right: 4em;">
                    <div>
                        <span class="title-block">
                            <!-- Put the title and author in separate inline-blocks, to encourage
                                 the browser to wrap between them if possible, putting the author
                                 on its own line if they won\'t both fit, but still allowing the
                                 title to wrap if it\'s too long by itself. -->
                            <span style="display: inline-block;" class="title-font">
                                <a class="title"></a>
                            </span>
                            <span style="display: inline-block;" class="author-block title-font">
                                <span style="font-size: 12px;">by</span>
                                <a class="author"></a>
                            </span>
                            <a class=edit-post href=#>Edit post</a>
                        </span>
                    </div>
                </div>

                <div class=button-row>
                    <a class="disable-ui-button popup" data-popup="Return to Pixiv" href="#no-ppixiv">
                        ### inline:pixiv-icon.svg
                    </a>

                    <div class="navigate-out-button popup" data-popup="Show all">
                        <div class="grey-icon icon-button">
                            ### inline:thumbnails-icon.svg
                        </div>
                    </div>

                    <div class="download-button download-image-button popup" data-download="image" data-popup="Download image">
                        <div class="grey-icon icon-button button enabled">
                            ### inline:download-icon.svg
                        </div>
                    </div>

                    <div class="download-button download-manga-button popup" data-download="ZIP" data-popup="Download ZIP of all images">
                        <div class="grey-icon icon-button button enabled">
                            ### inline:download-manga-icon.svg
                        </div>
                    </div>

                    <div class="download-button download-video-button popup" data-download="MKV" data-popup="Download MKV">
                        <div class="grey-icon icon-button button enabled">
                            ### inline:download-icon.svg
                        </div>
                    </div>

                    <!-- position: relative positions the tag dropdown. -->
                    <div style="position: relative;">
                        <!-- position: relative positions the bookmark count. -->
                        <div class="button button-bookmark public popup" style="position: relative;">
                            ### inline:heart-icon.svg
 
                            <div class=count></div>
                        </div>

                        <div class=popup-bookmark-tag-dropdown-container></div>
                    </div>

                    <div class="button button-bookmark private popup">
                        ### inline:heart-icon.svg
                    </div>
                    
                    <div style="position: relative;">
                        <div class="button button-bookmark-tags grey-icon popup" data-popup="Bookmark tags">
                            ### inline:tag-icon.svg
                            <div style="position: absolute; bottom: 2px; left: 4px;">
                                <div class=tag-dropdown-arrow hidden></div>
                            </div>
                        </div>
                    </div>

                    <div class="button button-like enabled popup" style="position: relative;">
                        ### inline:like-button.svg

                        <div class=count></div>
                    </div>

                    <a class="similar-illusts-button bulb-button popup" data-popup="Similar illustrations" href=#>
                        <div class="grey-icon icon-button">
                            ### inline:related-illusts.svg
                        </div>
                    </a>

                    <a class="similar-artists-button bulb-button grey-icon popup" data-popup="Similar artists" href=#>
                        <div class="grey-icon icon-button">
                            ### inline:related-illusts.svg
                        </div>
                    </a>

                    <a class="similar-bookmarks-button bulb-button grey-icon popup" data-popup="Similar bookmarks" href=#>
                        <div class="grey-icon icon-button">
                            ### inline:related-illusts.svg
                        </div>
                    </a>

                    <div class="image-settings-menu-box settings-menu-box popup" data-popup="Preferences">
                        <div class="menu-button grey-icon icon-button">
                            ### inline:settings-icon.svg
                        </div>
                        <div class="popup-menu-box keep-menu-open"></div>
                    </div>
                </div>
                <div class=post-info>
                    <div class="post-age popup" hidden></div>
                    <div class=page-count hidden></div>
                    <div class=ugoira-duration hidden></div>
                    <div class=ugoira-frames hidden></div>
                    <div class=image-info hidden></div>
                </div>
               
                <div class=tag-list></div>
                <div class=description></div>
            </div>
        </template>

        <template class=template-muted>
            <div class=mute-display>
                <img class=muted-image>
                <div class=muted-text>
                    <Span>Muted:</span>
                    <span class=muted-label></span>
                </div>
            </div>
        </template>

        <!-- A user avatar, with a follow/unfollow UI. -->
        <template class="template-avatar">
            <div class="follow-container">
                <a href=# class=avatar-link style="position: relative;">
                    <div class="avatar popup popup-bottom">
                        <canvas class=main></canvas>
                        <canvas class=highlight></canvas>
                    </div>

                    <!-- We either show the following icon if we're already following (which acts as the unfollow
                         button), or the public and private follow buttons.  The follow button is only shown on hover. -->
                    <div class="follow-icon follow-button public bottom-left popup popup-bottom" data-popup="Follow publically">
                        ### inline:eye-icon.svg
                    </div>
                    <div class="follow-icon follow-button private bottom-right popup popup-bottom" data-popup="Follow privately">
                        ### inline:eye-icon.svg
                    </div>
                    <div class="follow-icon following-icon unfollow-button bottom-right popup popup-bottom" data-popup="Unfollow">
                        ### inline:eye-icon.svg
                    </div>
                </a>
                <div class="popup-menu-box hover-menu-box follow-popup">
                    <div class=hover-area></div>
                    <div class=not-following>
                        <div class="button follow-button public">
                            Follow
                        </div>
                        <div class="button follow-button private">
                            Follow&nbsp;Privately
                        </div>
                        <input class="folder premium-only" placeholder="Folder">
                        </input>
                    </div>
                </div>
            </div>
        </template>

        <!-- bookmark_tag_list_widget -->
        <template class=template-popup-bookmark-tag-dropdown>
            <div class=popup-bookmark-tag-dropdown>
                <div class=tag-list></div> <!-- tag list is inserted here -->
                <div class=tag-right-button-strip>
                    <div class="tag-button popup add-tag" data-popup="Add a different tag" style="padding: 12px 8px; text-align: center;">
                        <div class=grey-icon>
                            +
                        </div>
                    </div>
                    <div class="tag-button popup sync-tags" data-popup="Load common tags from bookmarks" style="padding: 4px 8px; ">
                        <div class=grey-icon>
                            ### inline:refresh-icon.svg
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template class=template-tag-dropdown>
            <div class=search-history>
                <!-- This is to make sure there isn't a gap between the input and the dropdown,
                     so we don't consider the mouse out of the box when it moves from the input
                     to the autocomplete box. -->
                <div class=hover-box style="top: -10px; width: 100%; z-index: -1;"></div>
                    
                <div class=input-dropdown>
                    <div class=input-dropdown-list>
                        <!-- template-tag-dropdown-entry instances will be added here. -->
                    </div>
                </div>
            </div>
        </template>

        <template class=template-tag-dropdown-entry>
            <a class=entry href=#>
                <div class=suggestion-icon>
                    ### inline:search-result-icon.svg
                </div>
                
                <span class=search></span>
                <span class="remove-history-entry keep-menu-open">X</span>
            </div>
        </template>

        <template class=template-edit-search-dropdown>
            <div class=edit-search>
                <div class=input-dropdown>
                    <div class=input-dropdown-list>
                        <!-- template-edit-search-dropdown-entry instances will be added here. -->
                    </div>
                </div>
            </div>
        </template>

        <template class=template-edit-search-dropdown-entry>
            <div class=entry>
                <a class=search></a>
            </div>
        </template>
        
        <template class=template-manga-thumbnail>
            <div class=manga-thumbnail-box>
                <img class=manga-thumb>
            </div>
        </template>

        <template class=template-manga-view-thumbnail>
            <li class=thumbnail-box>
                <div class=thumbnail-inner>
                    <a class=thumbnail-link href=#>
                        <img class=thumb>
                    </a>
                </div>
            </li>
        </template>
        
        <template class=template-context-menu>
            <div class=popup-context-menu>
                <div class=button-strip>
                    <div class=button-block>
                        <div class="button button-return-to-search" data-level=0 data-popup="Return to search">
                            ### inline:thumbnails-icon.svg
                        </div>
                    </div>

                    <div class=button-block>
                        <div class="button button-fullscreen enabled" data-level=0 data-popup="Fullscreen">
                            ### inline:fullscreen.svg
                        </div>
                    </div>
                    <div class=context-menu-image-info>
                        <div style="flex: 1;"></div>
                        <div class=page-count hidden></div>
                        <div class=image-info hidden></div>
                        <div style="flex: 1;"></div>
                    </div>
                </div>
                <div class=button-strip>
                    <div class="button-block shift-left">
                        <div class="button button-browser-back enabled" data-level=0 data-popup="Back" style="transform: scaleX(-1);">
                            ### inline:exit-icon.svg
                        </div>
                    </div>
                    <div class=button-block>
                        <div class="button requires-zoom button-zoom" data-popup="Toggle zoom">
                            ### inline:zoom-plus.svg
                            ### inline:zoom-minus.svg
                        </div>
                    </div>
                    <div class=button-block>
                        <div class="button requires-zoom button-zoom-level" data-level="cover" data-popup="Zoom to cover">
                            ### inline:zoom-full.svg
                        </div>
                    </div>
                    <div class=button-block>
                        <div class="button requires-zoom button-zoom-level" data-level="actual" data-popup="Zoom to actual size">
                        ### inline:zoom-actual.svg
                        </div>
                    </div>
                </div>
                <div class=button-strip>
                    <div class="button-block shift-left">
                        <div class="avatar-widget-container"></div>
                    </div>

                    <!-- position: relative positions the popup menu. -->
                    <div class=button-block style="position: relative;">
                        <!-- position: relative positions the bookmark count. -->
                        <div class="button button-bookmark public" style="position: relative;">
                            ### inline:heart-icon.svg
 
                            <div class=count></div>
                        </div>

                        <div class=popup-bookmark-tag-dropdown-container></div>
                    </div>

                    <div class=button-block>
                        <div class="button button-bookmark private">
                            ### inline:heart-icon.svg
                        </div>
                    </div>
                    
                    <div class=button-block style="position: relative;">
                        <div class="button button-bookmark-tags" data-popup="Bookmark tags">
                            ### inline:tag-icon.svg
                            <div style="position: absolute; bottom: 2px; left: 4px;">
                                <div class=tag-dropdown-arrow hidden></div>
                            </div>
                        </div>
                    </div>

                    <div class=button-block>
                        <div class="button button-like enabled" style="position: relative;">
                            ### inline:like-button.svg
 
                            <div class=count></div>
                        </div>
                    </div>
                </div>
                               
                <!--
                <div style="display: flex; flex-direction: column; text-align: left;">
                    <div>
                        <span style="fill: #fff;">
                            ### inline:related-illusts.svg
                        </span>
                        <span>See similar images</span>
                    </div>
                    <div>Save image</div>
                    <div>Save all images (ZIP)</div>
                </div>
                -->
                <div class=tooltip-display>
                    <div class=tooltip-display-text></div>
                </div>
            </div>
        </template>

        <!-- Recent bookmark tags in the popup menu: -->
        <style>
        .popup-bookmark-tag-entry {
            padding: 2px 8px;
            display: flex;
            cursor: pointer;
        }
                   .popup-bookmark-tag-entry.active {
            background-color: #004;
        }
        body.light .popup-bookmark-tag-entry.active {
            background-color: #00c;
            color: #fff;
        }
                   .popup-bookmark-tag-entry.active:hover {
            background-color: #00a;
        }
        body.light .popup-bookmark-tag-entry.active:hover {
            background-color: #00a;
        }
                   .popup-bookmark-tag-entry:not(.active):hover {
            background-color: #222;
        }
        body.light .popup-bookmark-tag-entry:not(.active):hover {
            background-color: #ccc;
        }

        .popup-bookmark-tag-entry > .tag-name {
            flex: 1;
        }
        </style>
        <template class=template-popup-bookmark-tag-entry>
            <div class=popup-bookmark-tag-entry style="display: flex; flex-direction: row; align-items: center; ">
                <span class=tag-name></span>
            </div>
        </template>
        
        <template class=template-menu-slider>
            <div class="menu-slider thumbnail-size-box">
                <div class="box-section">
                    <span class=label></span>
                </div>
                <div class="box-section">
                    <input class=thumbnail-size type=range>
                </div>
            </div>
        </template>
        <template class=template-menu-toggle>
            <div class="menu-toggle box-link">
                <span class=on>☑</span>
                <span class=off>☐</span>
                <span class=label style="margin-left: 2px;"></span>
            </div>
        </template>

        <!-- The "add tag" popup.  This isn't generalized since this is the only overlay prompt
             we have right now. -->
        <style>
        .tag-entry-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .tag-entry-popup > .strip {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
            justify-content: center;
        }
        .tag-entry-popup > .strip > .box {
            background-color: #222;
            padding: 10px;
            color: #eee;
            position: relative;
        }
        body.light .tag-entry-popup > .strip > .box {
            background-color: #ddd;
            color: #222;
        }
        .tag-entry-popup .close-button {
            position: absolute;
            top: 0px;
            right: 0px;
            padding: 8px;
            cursor: pointer;
        }
        .tag-entry-popup .tag-input-box {
            position: relative;
            display: flex;
            align-items: center;
        }
        .tag-entry-popup .tag-input-box > .add-tag-input {
            flex: 1;
            padding: 4px;
        }
        .tag-entry-popup .tag-input-box > .submit-button {
            cursor: pointer;
            display: inline-block;
            width: 20px;
            text-align: center;
            margin-left: 6px;
            border: 1px solid white;
        }
        body.light .tag-entry-popup .tag-input-box > .submit-button {
            border-color: #444;
        }
        .tag-entry-popup .tag-input-box > .submit-button:hover {
            background-color: #444;
        }
        body.light .tag-entry-popup .tag-input-box > .submit-button:hover {
            background-color: #aaa;
        }
        </style>
        <template class=template-add-tag-prompt>
            <div class="tag-entry-popup">
                <div class=strip>
                    <div class=box>
                        <div class=close-button>X</div>
                        <div style="margin-bottom: 4px;">
                            New tag:
                        </div>
                        <div class=tag-input-box>
                            <input class=add-tag-input>
                            <span class=submit-button>+</span>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <!-- Extra link buttons in the search view: -->
        <template class=template-extra-profile-link-button>
            <div class=extra-profile-link-button>
                <a href=# class="extra-link grey-icon bulb-button popup popup-bottom" rel="noreferer noopener">
                    <span class="default-icon">
                        ### inline:link-icon.svg
                    </span>
                    <span class="shopping-cart" hidden>
                        ### inline:shopping-cart.svg
                    </span>
                </a>
            </div>
        </template>
    </div>
</div>
