<div class="main-container noise-background">
    <div class=hover-message>
        <div class=message></div>
    </div>

    <div class=loading-progress-bar></div>

    <!-- main_ui: -->
    <div class="view view-illust-container">
        <div class=image-container data-context-menu-target></div>

        <div class=ugoira-seek-bar></div>

        <!-- This covers the progress bar. -->
        <div class=manga-thumbnail-container hidden>
            <div class=strip>
                <div class=manga-thumbnail-arrow data-direction=left>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="100" viewBox="0 0 20 100">
                        <path d="M 0 50 L 20 0 L 20 100 L 0 50" />
                    </svg>
                </div>

                <div class=manga-thumbnails></div>

                <div class=manga-thumbnail-arrow data-direction=right>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="100" viewBox="0 0 20 100">
                        <path d="M 20 50 L 0 0 L 0 100 L 20 50" />
                    </svg>
                </div>
            </div>
        </div>

        <div class=ui>
            <div class=hover-sphere>
                <svg viewBox="0 0 1 1" preserveAspectRatio="none">
                    <circle class=hover-circle cx="0.5" cy="0.5" r=".5" fill-opacity="0" />
                </svg>
            </div>
        </div>
    </div>

    <!-- thumbnail_view: -->
    <div class="view view-search-container noise-background" data-context-menu-target hidden>
        <div class=thumbnail-ui>
            <div style="flex: 1;"></div>

            <div class=thumbnail-ui-box data-context-menu-target=off>
                <div class="data-source-specific avatar-container" data-datasource="artist illust bookmarks"></div>
                <a href=# class="data-source-specific image-for-suggestions" data-datasource=related-illusts>
                    <!-- A blank image, so we don't load anything: -->
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==">
                </a>

                <div style="display: flex; flex-direction: row; align-items: center;">
                    <div class="displaying title-font"></div>
                    <div style="flex: 1;"></div>
                    <div>
                        <a href=# rel=noreferrer class="webpage-link grey-icon popup popup-bottom" data-popup="Webpage" hidden>
                            <svg viewBox="0 0 391.08 391.08" style="fill: currentColor;">
                                <path d="M326.67,203.55L200.38,91.71,74,203.6V363.47a7.44,7.44,0,0,0,7.46,7.45h79v-70.1a7.44,7.44,0,0,1,7.45-7.46h64.88a7.44,7.44,0,0,1,7.45,7.46v70.1h79a7.42,7.42,0,0,0,7.45-7.45V203.55Z" transform="translate(-4.8 -5.17)"/>
                                <path d="M199.65,30.51L20.44,189.19l18.88,21.29L200.38,67.86l161,142.62,18.84-21.29L201.08,30.51l-0.7.81-0.73-.81h0Z" transform="translate(-4.8 -5.17)"/>
                            </svg>
                        </a>
                    </div>
                    <div>
                        <a href=# rel=noreferrer class="twitter-icon grey-icon popup popup-bottom" data-popup="Twitter" hidden>
                            <svg viewBox="0 0 32 32" style="fill: currentColor;">
                                <path d="M3,24.3115115 C3.43335894,24.361638 3.8743224,24.3872818 4.32140898,24.3872818 C6.9166246,24.3872818 9.30513552,23.5195519 11.2009327,22.063852 C8.77696697,22.0200155 6.73125206,20.4508052 6.02640184,18.2943991 C6.36455613,18.3577829 6.71159881,18.391749 7.0685175,18.391749 C7.57377373,18.391749 8.0631296,18.325462 8.52799298,18.2014038 C5.99381104,17.7028486 4.0844837,15.5090896 4.0844837,12.8792882 C4.0844837,12.8564507 4.0844837,12.8337099 4.08487874,12.8110659 C4.83180072,13.2175936 5.68587732,13.4617424 6.59397564,13.4899022 C5.10763744,12.5165971 4.12961703,10.8552624 4.12961703,8.97222947 C4.12961703,7.97753828 4.40278723,7.04516649 4.87960057,6.24352996 C7.61169757,9.52729793 11.6933502,11.6881554 16.2971469,11.9144987 C16.2027324,11.5172609 16.1536486,11.1029917 16.1536486,10.6775941 C16.1536486,7.68016635 18.6339076,5.25 21.6931965,5.25 C23.2863931,5.25 24.7260178,5.90919218 25.7365302,6.96407385 C26.9982882,6.7206024 28.1838034,6.26888351 29.2540656,5.64694749 C28.8404587,6.91433445 27.9621859,7.97802213 26.8184462,8.64979431 C27.9389773,8.5185752 29.006573,8.22681589 30,7.79512823 C29.2573247,8.88358883 28.318117,9.83957232 27.2359048,10.6048236 C27.2465708,10.8375537 27.2519039,11.0716385 27.2519039,11.3069813 C27.2519039,18.4794219 21.680259,26.75 11.4913859,26.75 C8.36316252,26.75 5.45142105,25.8514974 3,24.3115115 Z"></path>
                            </svg>

                        </a>
                    </div>

                    <div>
                        <a class="bookmarks-link grey-icon popup popup-bottom" href=# rel=noreferrer data-popup="View bookmarks" hidden>
                            <svg viewBox="0 0 510 510" style="width: 28px; fill: currentColor;">
                                <path d="M510,197.472l-183.37-15.734L255,12.75l-71.629,168.988L0,197.472l139.103,120.539L97.41,497.25L255,402.186 l157.59,95.064l-41.692-179.239L510,197.472z M255,354.348l-95.957,57.886l25.398-109.166l-84.736-73.389l111.69-9.588 L255,117.172l43.605,102.918l111.689,9.588l-84.711,73.389l25.398,109.166L255,354.348z"
                                />
                            </svg>
                        </a>
                    </div>
                    <div>
                        <a class="contact-link grey-icon popup popup-bottom" href=# rel=noreferrer data-popup="Send a message" hidden>
                            <svg viewBox="0 0 114 114" stroke="currentColor">
                                <path stroke-width="7" fill="none" d="m7,20h98v72H7zl44,44q5,4 10,0l44-44M7,92l36-36m26,0 36,36"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <div class=button-row>
                    <a class="disable-ui-button popup" data-popup="Return to Pixiv" href="#no-ppixiv" style="margin-right: -2px;">
                        ### inline:pixiv-icon.svg
                    </a>

                    <div class="navigation-menu-box popup" data-popup="Search">
                        <svg class="menu-button icon-button grey-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" style="fill: currentColor;">
                            <path d="M 6 7 h 20 v 4 h -20 v -4"/>
                            <path d="M 6 14 h 20 v 4 h -20 v -4"/>
                            <path d="M 6 21 h 20 v 4 h -20 v -4"/>
                        </svg>
                        <div class="popup-menu-box">
                            <div class=option-list>
                                <a class=box-link href="/new_illust.php#ppixiv">New works</a>
                                <a class=box-link href="/bookmark_new_illust.php#ppixiv">New works by following</a>
                                <a class=box-link href="/bookmark.php?p=1#ppixiv">Bookmarks</a>
                                <a class=box-link href="/discovery#ppixiv">Recommended works</a>
                                <a class=box-link href="/ranking.php#ppixiv">Rankings</a>

                                <div class="navigation-search-box" style="padding: .25em; margin: .25em;">
                                    <div class=search-box>
                                        <input class="search-tags keep-menu-open" placeholder=Search>
                                        <span class=search-submit-button>üîç</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="thumbnail-settings-menu-box settings-menu-box popup" data-popup="Preferences">
                        <div class="menu-button grey-icon icon-button">
                            ### inline:settings-icon.svg
                        </div>
                        
                        <div class="popup-menu-box keep-menu-open">
                            <div class=option-list></div>
                        </div>
                    </div>
                </div>

                <div class="data-source-specific" data-datasource=discovery>
                    <a class="box-link popup" data-type=all data-popup="Show all works" href="?mode=all#ppixiv">All</a>
                    <a class="box-link popup" data-type=safe data-popup="Show all-ages works" href="?mode=safe#ppixiv">All ages</a>
                    <a class="box-link popup" data-type=r18 data-popup="Show R18 works" href="?mode=r18#ppixiv">R18</a>
                </div>

                <div class="data-source-specific" data-datasource=new_illust>
                    <a class="box-link popup" data-type=new-illust-type-all data-popup="Show all works" href="#">All</a>
                    <a class="box-link popup" data-type=new-illust-type-illust data-popup="Show illustrations only" href="#">Illustrations</a>
                    <a class="box-link popup" data-type=new-illust-type-manga data-popup="Show manga only" href="#">Manga</a>
                    <a class="box-link popup" data-type=new-illust-type-ugoira data-popup="Show ugoira only" href="#">Ugoira</a>

                    <a class="box-link popup" data-type=new-illust-ages-all data-popup="Show all-ages works" href="#">All ages</a>
                    <a class="box-link popup" data-type=new-illust-ages-r18 data-popup="Show R18 works" href="#">R18</a>
                </div>
                
                <div class="data-source-specific" data-datasource=rankings>
                    <div>
                        <span class=nav-tomorrow>
                            <a class="box-link popup" data-popup="Show the next day" href="#">Next day</a>
                        </span>

                        <span class=nav-today></span>

                        <span class=nav-yesterday> <!-- so box-link's display style doesn't override hidden -->
                            <a class="box-link popup" data-popup="Show the previous day" href="#">Previous day</a>
                        </span>
                    </div>

                    <div class="checked-links">
                        <a class="box-link popup" data-type=content-all data-popup="Show all works" href="#">All</a>
                        <a class="box-link popup" data-type=content-illust data-popup="Show illustrations only" href="#">Illustrations</a>
                        <a class="box-link popup" data-type=content-ugoira data-popup="Show ugoira only" href="#">Ugoira</a>
                        <a class="box-link popup" data-type=content-manga data-popup="Show manga only" href="#">Manga</a>
                    </div>

                    <div class="checked-links">
                        <a class="box-link popup" data-type=mode-daily data-popup="Daily rankings" href="#">Daily</a>
                        <a class="box-link popup" data-type=mode-daily-r18 data-popup="Show R18 works (daily only)" href="#">R18</a>
                        <a class="box-link popup" data-type=mode-weekly data-popup="Weekly rankings" href="#">Weekly</a>
                        <a class="box-link popup" data-type=mode-monthly data-popup="Monthly rankings" href="#">Monthly</a>
                        <a class="box-link popup" data-type=mode-rookie data-popup="Rookie rankings" href="#">Rookie</a>
                        <a class="box-link popup" data-type=mode-male data-popup="Popular among males" href="#">Male</a>
                        <a class="box-link popup" data-type=mode-female data-popup="Popular among females" href="#">Female</a>
                    </div>
                </div>
                 
                <div class="data-source-specific" data-datasource=bookmarks>
                    <div class=bookmarks-public-private>
                        <a class="box-link popup" data-type=all data-popup="Show all bookmarks" href=#>All</a>
                        <a class="box-link popup" data-type=public data-popup="Show public bookmarks" href=#>Public</a>
                        <a class="box-link popup" data-type=private data-popup="Show private bookmarks" href=#>Private</a>
                    </div>
                </div>                

                <div class="data-source-specific" data-datasource="bookmarks bookmarks_new_illust">
                    <div class=bookmark-tag-selection>
                        <span>Bookmark tags:</span>
                        <span class=bookmark-tag-list></span>
                    </div>
                </div>

                <div class="data-source-specific" data-datasource=artist>
                    <div class=search-options-row>
                        <a class="box-link popup" data-type=artist-works data-popup="Show all works" href=#>Works</a>
                        <a class="box-link popup" data-type=artist-illust data-popup="Show illustrations only" href=#>Illusts</a>
                        <a class="box-link popup" data-type=artist-manga data-popup="Show manga only" href=#>Manga</a>

                        <div class=member-tags-box>
                            <div class="menu-button box-link">Tags</div>
                            <div class="popup-menu-box post-tag-list"></div>
                        </div>
                    </div>
                </div>
                 
                <div class="data-source-specific" data-datasource=search>
                    <div class="search-page-tag-entry search-box">
                        <div class="tag-search-box hover-menu-box">
                            <input class=search-tags placeholder=Tags>
                            <span class=search-submit-button>üîç</span>
                        </div>

                        <div class=search-tags-box style="display: inline-block;">
                            <div class="menu-button box-link">Related tags</div>
                            <div class="popup-menu-box related-tag-list"></div>
                        </div>
                    </div>

                    <!-- We don't currently have popup text for these, since it's a little annoying to
                         have it pop over the menu. -->
                    <div class=search-options-row>
                        <div class=ages-box>
                            <span class="menu-button box-link">Ages</span>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=ages-all data-default=1 href="?mode=all#ppixiv">All</a>
                                    <a class=box-link data-type=ages-safe href="?mode=safe#ppixiv">All ages</a>
                                    <a class=box-link data-type=ages-r18 href="?mode=r18#ppixiv">R18</a>
                                </div>
                            </div>
                        </div>
                       
                        <div class=popularity-box>
                            <span class="menu-button box-link">Popularity</span>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=order-newest data-default=1 href="?order=all#ppixiv">Newest</a>
                                    <a class=box-link data-type=order-oldest data-default=1 href="?order=all#ppixiv">Oldest</a>
                                    <a class="box-link premium-only" data-type=order-male href="?order=popular_male_d#ppixiv">Male</a>
                                    <a class="box-link premium-only" data-type=order-female href="?order=popular_female_d#ppixiv">Female</a>
                                </div>
                            </div>
                        </div>

                        <div class=type-box>
                            <span class="box-link menu-button">Type</span>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=search-type-all data-default=1 href="?type=all#ppixiv">All</a>
                                    <a class=box-link data-type=search-type-illust href="?type=illust#ppixiv">Illustrations</a>
                                    <a class=box-link data-type=search-type-manga href="?type=manga#ppixiv">Manga</a>
                                    <a class=box-link data-type=search-type-ugoira href="?type=ugoira#ppixiv">Ugoira</a>
                                </div>
                            </div>
                        </div>

                        <div class=search-mode-box>
                            <div class="box-link menu-button">Search mode</div>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=search-all data-default=1 href="?#ppixiv">Tag</a>
                                    <a class=box-link data-type=search-exact href="?s_mode=s_tag_full#ppixiv">Exact tag match</a>
                                    <a class=box-link data-type=search-text href="?s_mode=s_tc#ppixiv">Text search</a>
                                </div>
                            </div>
                        </div>

                        <div class=size-box>
                            <span class="box-link menu-button">Image size</span>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=res-all data-default=1 href="#">All</a>
                                    <a class=box-link data-type=res-high href="?wlt=3000&hlt=3000#ppixiv">High-res</a>
                                    <a class=box-link data-type=res-medium href="?wlt=1000&wgt=2999&hlt=1000&hgt=2999#ppixiv">Medium-res</a>
                                    <a class=box-link data-type=res-low href="?wgt=999&hgt=999#ppixiv">Low-res</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class=aspect-ratio-box>
                            <span class="box-link menu-button">Aspect ratio</span>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=aspect-ratio-all data-default=1 href="?ratio=0.5#ppixiv">All</a>
                                    <a class=box-link data-type=aspect-ratio-landscape href="?ratio=0.5#ppixiv">Landscape</a>
                                    <a class=box-link data-type=aspect-ratio-portrait href="?ratio=-0.5#ppixiv">Portrait</a>
                                    <a class=box-link data-type=aspect-ratio-square href="?ratio=0#ppixiv">Square</a>
                                </div>
                            </div>
                        </div>

                        <div class="bookmarks-box premium-only">
                            <span class="menu-button box-link">Bookmarks</span>
                            <div class="popup-menu-box">
                                <!-- The Pixiv search form shows 300-499, 500-999 and 1000-.  That's not
                                     really useful and the query parameters let us filter differently, so we
                                     replace it with a more useful "minimum bookmarks" filter. -->
                                <div class="option-list min-bookmarks">
                                    <a class=box-link data-type=bookmarks-all data-default=1 href="#ppixiv">All</a>
                                    <a class=box-link data-type=bookmarks-100 href=#>100+</a>
                                    <a class=box-link data-type=bookmarks-250 href=#>250+</a>
                                    <a class=box-link data-type=bookmarks-500 href=#>500+</a>
                                    <a class=box-link data-type=bookmarks-1000 href=#>1000+</a>
                                    <a class=box-link data-type=bookmarks-2500 href=#>2500+</a>
                                    <a class=box-link data-type=bookmarks-5000 href=#>5000+</a>
                                </div>
                            </div>
                        </div>
                       

                        <div class="time-box premium-only">
                            <div class="menu-button box-link">Time</div>
                            <div class="popup-menu-box">
                                <div class=option-list>
                                    <a class=box-link data-type=time-all data-default=1 href="#">All</a>
                                    <a class=box-link data-type=time-week href="#">This week</a>
                                    <a class=box-link data-type=time-month href="#">This month</a>
                                    <a class=box-link data-type=time-year href="#">This year</a>
                                    <style>
                                        .years-ago {
                                            padding: .25em;
                                            margin: .25em;
                                            white-space: nowrap;
                                        }
                                        /* These links are mostly the same as box-link, but since the
                                         * menu background is the same as the box-link background color,
                                         * we shift it a little to make it clear these are buttons. */
                                        .years-ago > a {
                                            padding: 4px 10px;
                                            background-color: #444;
                                        }
                                        body.light .years-ago > a {
                                            background-color: #ccc;
                                        }
                                    </style>
                                    <div class=years-ago>
                                        <a class=box-link data-type=time-years-ago-1 href="#">1</a>
                                        <a class=box-link data-type=time-years-ago-2 href="#">2</a>
                                        <a class=box-link data-type=time-years-ago-3 href="#">3</a>
                                        <a class=box-link data-type=time-years-ago-4 href="#">4</a>
                                        <a class=box-link data-type=time-years-ago-5 href="#">5</a>
                                        <a class=box-link data-type=time-years-ago-6 href="#">6</a>
                                        <a class=box-link data-type=time-years-ago-7 href="#">7</a>
                                        <span>years ago</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <a href=# class="reset-search box-link popup" data-popup="Clear all search options">Reset</a>
                    </div>
                </div>
            </div>
            <div style="flex: 1;">
            </div>
        </div>

        <ul class=thumbnails></ul>
    </div>

    <div class="view view-manga-container noise-background" data-context-menu-target hidden>
        <div class=ui style="display: flex; width: 100%; justify-content: center;">
            <div class=ui-container data-context-menu-target=off></div>
        </div>
        
        <ul class=thumbnails></ul>
    </div>
    
    <!-- Templates: -->
    <div>
        <template class=template-thumbnail>
            <li class=thumbnail-box>
                <div class=thumbnail-inner>
                    <a class=thumbnail-link href=#>
                        <img class=thumb>
                    </a>

                    <div class="thumbnail-label" hidden>
                        <div class=label></div>
                    </div>
                    <div class=thumbnail-bottom-left>
                        <div class="heart button-bookmark public bookmarked" hidden>
                            ### inline:heart-icon.svg
                        </div>
                        <div class="heart button-bookmark private bookmarked" hidden>
                            ### inline:heart-icon.svg
                        </div>

                        <!-- I don't like having no popup here, but it's too intrusive over the thumbnail.
                             Hopefully the popup over the equivalent button in the image UI is enough to tell
                             people what this does. -->
                        <a href=# class="similar-illusts-button grey-icon">
                            ### inline:related-illusts.svg
                        </a>
                    </div>
                    
                    <div class=ugoira-icon hidden></div>
                    <div class=page-count-box hidden>
                        <span class=page-icon></span>
                        <span class=page-count></span>
                    </div>
                    <div class=muted>
                        <span>Muted:</span>
                        <span class=muted-label></span>
                    </div>
                </div>
            </li>
        </template>

        <template class=template-image-ui>
            <div class=ui-box>
                <!-- The avatar icon in the top-right.  This is absolutely positioned, since we don't
                     want this to push the rest of the UI down. -->
                <div class="avatar-popup" style="position: absolute; top: 1em; right: 1em;"></div>

                <!-- The title and author.  The margin-right here is to prevent this from
                     overlapping the absolutely-positioned avatar icon above. -->
                <div style="display: flex; flex-direction: row; margin-right: 4em;">
                    <div>
                        <span class="title-block">
                            <!-- Put the title and author in separate inline-blocks, to encourage
                                 the browser to wrap between them if possible, putting the author
                                 on its own line if they won\'t both fit, but still allowing the
                                 title to wrap if it\'s too long by itself. -->
                            <span style="display: inline-block;" class="title-font">
                                <a class="title"></a>
                            </span>
                            <span style="display: inline-block;" class="author-block title-font">
                                <span style="font-size: 12px;">by</span>
                                <a class="author"></a>
                            </span>
                            <a class=edit-post href=#>Edit post</a>
                        </span>
                    </div>
                </div>

                <div class=button-row>
                    <a class="disable-ui-button popup" data-popup="Return to Pixiv" href="#no-ppixiv">
                        ### inline:pixiv-icon.svg
                    </a>

                    <div class="navigate-out-button popup" data-popup="Show all">
                        <div class="grey-icon icon-button">
                            ### inline:thumbnails-icon.svg
                        </div>
                    </div>

                    <div class="download-button popup">
                        <div class="grey-icon icon-button button enabled">

                            ### inline:download-icon.svg
                        </div>
                    </div>

                    <!-- position: relative positions the tag dropdown. -->
                    <div style="position: relative;">
                        <!-- position: relative positions the bookmark count. -->
                        <div class="button button-bookmark public popup" style="position: relative;">
                            ### inline:heart-icon.svg
 
                            <div class=count></div>
                        </div>

                        <div class=popup-bookmark-tag-dropdown-container></div>
                    </div>

                    <div class="button button-bookmark private popup">
                        ### inline:heart-icon.svg
                    </div>
                    
                    <div style="position: relative;">
                        <div class="button button-bookmark-tags grey-icon popup" data-popup="Bookmark tags">
                            ### inline:tag-icon.svg
                            <div style="position: absolute; bottom: 2px; left: 4px;">
                                <div class=tag-dropdown-arrow hidden></div>
                            </div>
                        </div>
                    </div>

                    <div class="button button-like enabled popup" style="position: relative;">
                        ### inline:like-button.svg

                        <div class=count></div>
                    </div>

                    <a class="similar-illusts-button popup" data-popup="Similar illustrations" href=#>
                        <div class="grey-icon icon-button">
                            ### inline:related-illusts.svg
                        </div>
                    </a>

                    <div class="image-settings-menu-box settings-menu-box popup" data-popup="Preferences">
                        ### inline:settings-icon.svg
                        <div class="popup-menu-box keep-menu-open"></div>
                    </div>
                </div>
                <div class=post-info>
                    <div class=post-age hidden></div>
                    <div class=page-count hidden></div>
                    <div class=ugoira-duration hidden></div>
                    <div class=ugoira-frames hidden></div>
                    <div class=image-info hidden></div>
                </div>
               
                <div class=tag-list></div>
                <div class=description></div>
            </div>
        </template>

        <template class=template-muted>
            <div class=mute-display>
                <img class=muted-image>
                <div class=muted-text>
                    <Span>Muted:</span>
                    <span class=muted-label></span>
                </div>
            </div>
        </template>

        <!-- A user avatar, with a follow/unfollow UI. -->
        <template class="template-avatar">
            <div class="follow-container">
                <a href=# class=avatar-link style="position: relative;">
                    <img class="avatar popup popup-bottom">

                    <!-- We either show the following icon if we're already following (which acts as the unfollow
                         button), or the public and private follow buttons.  The follow button is only shown on hover. -->
                    <div class="follow-icon follow-button public bottom-left popup popup-bottom" data-popup="Follow publically">
                        ### inline:eye-icon.svg
                    </div>
                    <div class="follow-icon follow-button private bottom-right popup popup-bottom" data-popup="Follow privately">
                        ### inline:eye-icon.svg
                    </div>
                    <div class="follow-icon following-icon unfollow-button bottom-right popup popup-bottom" data-popup="Unfollow">
                        ### inline:eye-icon.svg
                    </div>
                </a>
                <div class="popup-menu-box hover-menu-box follow-popup">
                    <div class=hover-area></div>
                    <div class=not-following>
                        <div class="button follow-button public">
                            Follow
                        </div>
                        <div class="button follow-button private">
                            Follow&nbsp;Privately
                        </div>
                        <input class="folder premium-only" placeholder="Folder">
                        </input>
                    </div>
                </div>
            </div>
        </template>

        <!-- bookmark_tag_list_widget -->
        <template class=template-popup-bookmark-tag-dropdown>
            <div class=popup-bookmark-tag-dropdown>
                <div class=tag-list></div> <!-- tag list is inserted here -->
                <div class=tag-right-button-strip>
                    <div class="tag-button popup add-tag" data-popup="Add a different tag" style="padding: 4px 8px; text-align: center;">
                        <div class=grey-icon>
                            +
                        </div>
                    </div>
                    <div class="tag-button popup sync-tags" data-popup="Load common tags from bookmarks" style="padding: 4px 8px; ">
                        <div class=grey-icon>
                            ### inline:refresh-icon.svg
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template class=template-tag-dropdown>
            <div>
                <!-- This is to make sure there isn't a gap between the input and the dropdown,
                     so we don't consider the mouse out of the box when it moves from the input
                     to the autocomplete box. -->
                <div class=hover-box style="top: -10px; width: 100%; z-index: -1;"></div>
                    
                <div class=input-dropdown>
                    <div class=input-dropdown-list>
                        <!-- template-tag-dropdown-entry instances will be added here. -->
                    </div>
                </div>
            </div>
        </template>

        <template class=template-tag-dropdown-entry>
            <div class=entry>
                <div class=suggestion-icon>
                    ### inline:search-result-icon.svg
                </div>
                
                <a class=tag></a>
                <a class="remove-history-entry keep-menu-open" href=#>X</a>
            </div>
        </template>

        <template class=template-manga-thumbnail>
            <div class=manga-thumbnail-box>
                <img class=manga-thumb>
            </div>
        </template>

        <template class=template-manga-view-thumbnail>
            <li class=thumbnail-box>
                <div class=thumbnail-inner>
                    <a class=thumbnail-link href=#>
                        <img class=thumb>
                    </a>
                </div>
            </li>
        </template>
        
        <template class=template-context-menu>
            <div class=popup-context-menu>
                <div class=button-strip>
                    <div class=button-block>
                        <div class="button button-return-to-search" data-level=0 data-popup="Return to search">
                            ### inline:thumbnails-icon.svg
                        </div>
                    </div>

                    <div class=button-block>
                        <div class="button button-fullscreen enabled" data-level=0 data-popup="Fullscreen">
                            ### inline:fullscreen.svg
                        </div>
                    </div>
                </div>
                <div class="button-strip zoom-strip">
                    <div class=button-block>
                        <div class="button button-zoom" data-popup="Zoom lock">
                            ### inline:zoom-plus.svg
                            ### inline:zoom-minus.svg
                        </div>
                    </div>
                    <div class=button-block>
                        <div class="button button-zoom-level" data-level=0 data-popup="Zoom to full">
                            ### inline:zoom-full.svg
                        </div>
                    </div>
                    <div class=button-block>
                        <div class="button button-zoom-level" data-level=1 data-popup="2x zoom">
                            <div>2x</div>
                        </div>
                    </div>
                    <div class=button-block>
                        <div class="button button-zoom-level" data-level=2 data-popup="4x zoom">
                            <div>4x</div>
                        </div>
                    </div>
                    <div class=button-block>
                        <div class="button button-zoom-level" data-level=3 data-popup="8x zoom">
                            <div>8x</div>
                        </div>
                    </div>
                </div>
                <div class=button-strip>
                    <!-- position: relative positions the popup menu. -->
                    <div class=button-block style="position: relative;">
                        <!-- position: relative positions the bookmark count. -->
                        <div class="button button-bookmark public" style="position: relative;">
                            ### inline:heart-icon.svg
 
                            <div class=count></div>
                        </div>

                        <div class=popup-bookmark-tag-dropdown-container></div>
                    </div>

                    <div class=button-block>
                        <div class="button button-bookmark private">
                            ### inline:heart-icon.svg
                        </div>
                    </div>
                    
                    <div class=button-block style="position: relative;">
                        <div class="button button-bookmark-tags" data-popup="Bookmark tags">
                            ### inline:tag-icon.svg
                            <div style="position: absolute; bottom: 2px; left: 4px;">
                                <div class=tag-dropdown-arrow hidden></div>
                            </div>
                        </div>
                    </div>

                    <div class=button-block>
                        <div class="button button-like enabled" style="position: relative;">
                            ### inline:like-button.svg
 
                            <div class=count></div>
                        </div>
                    </div>

                    <div class=button-block>
                        <div class="avatar-widget-container"></div>
                    </div>
                </div>
                               
                <!--
                <div style="display: flex; flex-direction: column; text-align: left;">
                    <div>
                        <span style="fill: #fff;">
                            ### inline:related-illusts.svg
                        </span>
                        <span>See similar images</span>
                    </div>
                    <div>Save image</div>
                    <div>Save all images (ZIP)</div>
                </div>
                -->
                <div class=tooltip-display>
                    <div class=tooltip-display-text></div>
                </div>
            </div>
        </template>

        <!-- Recent bookmark tags in the popup menu: -->
        <style>
        .popup-bookmark-tag-entry {
            padding: 2px 8px;
            display: flex;
            cursor: pointer;
        }
                   .popup-bookmark-tag-entry.active {
            background-color: #004;
        }
        body.light .popup-bookmark-tag-entry.active {
            background-color: #00c;
            color: #fff;
        }
                   .popup-bookmark-tag-entry.active:hover {
            background-color: #00a;
        }
        body.light .popup-bookmark-tag-entry.active:hover {
            background-color: #00a;
        }
                   .popup-bookmark-tag-entry:not(.active):hover {
            background-color: #222;
        }
        body.light .popup-bookmark-tag-entry:not(.active):hover {
            background-color: #ccc;
        }

        .popup-bookmark-tag-entry > .tag-name {
            flex: 1;
        }
        </style>
        <template class=template-popup-bookmark-tag-entry>
            <div class=popup-bookmark-tag-entry style="display: flex; flex-direction: row; align-items: center; ">
                <span class=tag-name></span>
            </div>
        </template>
        
        <template class=template-menu-slider>
            <div class="menu-slider thumbnail-size-box">
                <div class="box-section">
                    <span class=label></span>
                </div>
                <div class="box-section">
                    <input class=thumbnail-size type=range>
                </div>
            </div>
        </template>
        <template class=template-menu-toggle>
            <div class="menu-toggle box-link">
                <span class=on>‚òë</span>
                <span class=off>‚òê</span>
                <span class=label style="margin-left: 2px;"></span>
            </div>
        </template>

        <!-- The "add tag" popup.  This isn't generalized since this is the only overlay prompt
             we have right now. -->
        <style>
        .tag-entry-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .tag-entry-popup > .strip {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
            justify-content: center;
        }
        .tag-entry-popup > .strip > .box {
            background-color: #222;
            padding: 10px;
            color: #eee;
            position: relative;
        }
        body.light .tag-entry-popup > .strip > .box {
            background-color: #ddd;
            color: #222;
        }
        .tag-entry-popup .close-button {
            position: absolute;
            top: 0px;
            right: 0px;
            padding: 8px;
            cursor: pointer;
        }
        .tag-entry-popup .tag-input-box {
            position: relative;
            display: flex;
            align-items: center;
        }
        .tag-entry-popup .tag-input-box > .add-tag-input {
            flex: 1;
            padding: 4px;
        }
        .tag-entry-popup .tag-input-box > .submit-button {
            cursor: pointer;
            display: inline-block;
            width: 20px;
            text-align: center;
            margin-left: 6px;
            border: 1px solid white;
        }
        body.light .tag-entry-popup .tag-input-box > .submit-button {
            border-color: #444;
        }
        .tag-entry-popup .tag-input-box > .submit-button:hover {
            background-color: #444;
        }
        body.light .tag-entry-popup .tag-input-box > .submit-button:hover {
            background-color: #aaa;
        }
        </style>
        <template class=template-add-tag-prompt>
            <div class="tag-entry-popup">
                <div class=strip>
                    <div class=box>
                        <div class=close-button>X</div>
                        <div style="margin-bottom: 4px;">
                            New tag:
                        </div>
                        <div class=tag-input-box>
                            <input class=add-tag-input>
                            <span class=submit-button>+</span>
                        </div>
                    </div>
                </div>
            </div>
        </template>
    </div>
</div>
